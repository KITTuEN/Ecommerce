{% extends "base.html" %}

{% block title %}Invoice - BRAEV{% endblock %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="d-flex justify-content-between align-items-center mb-5 no-print">
        <h1 class="h3 mb-0">Invoice</h1>
        <button onclick="window.print()" class="btn btn-dark"><i class="fas fa-print me-2"></i> Print Invoice</button>
    </div>

    <div class="card border p-5 rounded-0" id="invoice">
        <div class="row mb-5">
            <div class="col-6">
                <h2 class="h4 fw-bold mb-4">BRAEV</h2>
                <p class="text-muted small mb-0">
                    123 Fashion Street<br>
                    New York, NY 10001<br>
                    support@braev.com<br>
                    +1 234 567 8900
                </p>
            </div>
            <div class="col-6 text-end">
                <h3 class="h5 text-uppercase text-muted mb-3">Invoice Details</h3>
                <p class="mb-1"><strong>Invoice #:</strong> {{ order.order_id }}</p>
                <p class="mb-1"><strong>Date:</strong> {{ order.created_at.strftime('%d %b %Y') }}</p>
                <p class="mb-0"><strong>Status:</strong> {{ order.status }}</p>
            </div>
        </div>

        <div class="row mb-5">
            <div class="col-6">
                <h5 class="small text-uppercase fw-bold text-muted mb-3">Bill To</h5>
                <p class="mb-0">
                    <strong>{{ order.shipping_details.name }}</strong><br>
                    {{ order.shipping_details.address }}<br>
                    {{ order.shipping_details.city }}, {{ order.shipping_details.zip }}<br>
                    {{ order.shipping_details.phone }}
                </p>
            </div>
            <div class="col-6">
                <h5 class="small text-uppercase fw-bold text-muted mb-3">Ship To</h5>
                <p class="mb-0">
                    <strong>{{ order.shipping_details.name }}</strong><br>
                    {{ order.shipping_details.address }}<br>
                    {{ order.shipping_details.city }}, {{ order.shipping_details.zip }}<br>
                    {{ order.shipping_details.phone }}
                </p>
            </div>
        </div>

        <div class="table-responsive mb-5">
            <table class="table table-borderless">
                <thead class="border-bottom border-dark">
                    <tr>
                        <th class="text-uppercase small fw-bold py-3">Item Description</th>
                        <th class="text-uppercase small fw-bold py-3 text-center">Size</th>
                        <th class="text-uppercase small fw-bold py-3 text-center">Qty</th>
                        <th class="text-uppercase small fw-bold py-3 text-end">Unit Price</th>
                        <th class="text-uppercase small fw-bold py-3 text-end">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order['items'] %}
                    <tr class="border-bottom">
                        <td class="py-3">
                            <span class="fw-medium">{{ item.name }}</span>
                        </td>
                        <td class="py-3 text-center">{{ item.size if item.size else '-' }}</td>
                        <td class="py-3 text-center">{{ item.quantity }}</td>
                        <td class="py-3 text-end">₹{{ item.price }}</td>
                        <td class="py-3 text-end">₹{{ item.price * item.quantity }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="row justify-content-end">
            <div class="col-md-5">
                <div class="d-flex justify-content-between mb-2">
                    <span class="text-muted">Subtotal</span>
                    <span>₹{{ order.subtotal }}</span>
                </div>
                <div class="d-flex justify-content-between mb-3 border-bottom pb-3">
                    <span class="text-muted">Delivery Fee</span>
                    <span>{{ 'Free' if order.delivery_fee == 0 else '₹' + order.delivery_fee|string }}</span>
                </div>
                <div class="d-flex justify-content-between">
                    <span class="h5 mb-0">Total</span>
                    <span class="h5 mb-0">₹{{ order.total_amount }}</span>
                </div>
            </div>
        </div>

        <div class="mt-5 pt-5 border-top text-center text-muted small">
            <p class="mb-0">Thank you for your business!</p>
        </div>
    </div>
</div>

<style>
    @media print {
        .no-print {
            display: none !important;
        }

        .navbar,
        .footer {
            display: none !important;
        }

        .card {
            border: none !important;
            padding: 0 !important;
        }

        body {
            background: white;
        }
    }
</style>
{% endblock %}