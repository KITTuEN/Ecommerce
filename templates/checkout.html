{% extends "base.html" %}

{% block title %}Checkout - BRAEV{% endblock %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="section-title text-center mb-5">
        <h1 class="h3">Checkout</h1>
    </div>

    <form action="{{ url_for('checkout') }}" method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="row g-5">
            <div class="col-lg-8">
                <div class="card border p-4">
                    <h4 class="h5 mb-4">Billing Details</h4>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label fw-medium">Full Name</label>
                            <input type="text" class="form-control" name="name" value="{{ user.name if user else '' }}"
                                required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-medium">Email</label>
                            <input type="email" class="form-control" name="email"
                                value="{{ user.email if user else '' }}" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-medium">Phone Number</label>
                            <input type="tel" class="form-control" name="phone" value="{{ user.phone if user else '' }}"
                                required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-medium">Address</label>
                            <input type="text" class="form-control" name="address"
                                value="{{ user.address if user else '' }}" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label fw-medium">City</label>
                            <input type="text" class="form-control" name="city" value="{{ user.city if user else '' }}"
                                required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label fw-medium">State</label>
                            <input type="text" class="form-control" name="state"
                                value="{{ user.state if user else '' }}" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label fw-medium">ZIP Code</label>
                            <input type="text" class="form-control" name="zip" value="{{ user.zip if user else '' }}"
                                required>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card bg-light p-4 border-0 rounded-3">
                    <h4 class="h5 mb-4">Order Summary</h4>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="text-muted">Subtotal</span>
                        <span class="fw-bold">₹{{ total_price }}</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="text-muted">Shipping</span>
                        <span class="text-success">Free</span>
                    </div>
                    <hr class="my-3">
                    <div class="d-flex justify-content-between mb-4">
                        <span class="fw-bold">Total</span>
                        <span class="fw-bold fs-5">₹{{ total_price }}</span>
                    </div>

                    <h5 class="h6 mb-3">Payment Method</h5>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="payment_method" id="cod" value="COD" checked>
                        <label class="form-check-label" for="cod">
                            Cash on Delivery
                        </label>
                    </div>

                    <button type="submit" class="btn btn-dark w-100 py-3">Place Order</button>

                    <div class="mt-3 text-center">
                        <small class="text-muted">By placing an order, you agree to our Terms of Service.</small>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
{% endblock %}